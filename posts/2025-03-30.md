---
title: Leetcode 2109. Adding Spaces to a String
date: 2025-03-30
tags: [Array, double pointer]
---

You are given a **0-indexed** string `s` and a **0-indexed** integer array `spaces` that describes the indices in the original string where spaces will be added. Each space should be inserted **before** the character at the given index.

* For example, given `s = "EnjoyYourCoffee"` and `spaces = [5, 9]`, we place spaces before `'Y'` and `'C'`, which are at indices `5` and `9` respectively. Thus, we obtain `"Enjoy Your Coffee"`.

Return *the modified string **after** the spaces have been added.*

## Solution:
```C++
class Solution {
public:
    string addSpaces(string s, vector<int>& spaces) {
        vector<char> string_vec(s.begin(), s.end());

        size_t ptr1 = 0, ptr2 = 0;
        vector<char> ret;
        ret.reserve(s.size() + spaces.size());

        while (ptr1 < s.length() && ptr2 < spaces.size()) {
            if (spaces[ptr2] == ptr1) {
                ret.push_back(' ');
                ++ptr2;
            } else {
                ret.push_back(string_vec[ptr1++]);
            }
        }

        while (ptr1 < s.length()) {
            ret.push_back(string_vec[ptr1++]);
        }

        return string(ret.begin(), ret.end());
    }
};

```

## Explanation 
The problem requires inserting spaces at specific indices in a string. Since inserting characters directly into the original string would shift subsequent characters and make the logic complex, I chose to use a two-pointer approach along with building a new string:

First, I convert the input string into a character array for easy access;

I use two pointers: ptr1 to iterate through the original string, and ptr2 to iterate through the spaces array;

At each step, if the current index matches a space position (ptr1 == spaces[ptr2]), I insert a space into the result;

Otherwise, I add the current character to the result string;

After the main loop, I append any remaining characters from the original string;

To improve performance, I call reserve() to pre-allocate enough space for the result, avoiding repeated memory reallocations during string construction.

This method runs in linear time $O(n)$ while keeping the logic clean and efficient.